class Solution:
    def pacificAtlantic(self, matrix):
        """
        :type matrix: List[List[int]]
        :rtype: List[List[int]]
        """
        
        mem = {}
        
        result = []
        
        visited = set()

        def isPac(i, j):
            return i == 0 or j == 0
        def isAtl(i, j):
            return i == len(matrix) - 1 or j == len(matrix[0]) - 1
        
        
        def dfs(i, j):
            
            if (i, j) in mem:
                return mem[(i, j)]
            
            res1 = isPac(i, j)
            res2 = isAtl(i, j)
            
            visited.add((i, j))
            
            if i > 0 and matrix[i - 1][j] <= matrix[i][j] and (i - 1, j) not in visited and (not res1 or not res2):
                res = dfs(i - 1, j)
                res1 = res1 or res[0]
                res2 = res2 or res[1]
            
            if i < len(matrix) - 1 and matrix[i + 1][j] <= matrix[i][j] and (i + 1, j) not in visited and (not res1 or not res2):
                res = dfs(i + 1, j)
                res1 = res1 or res[0]
                res2 = res2 or res[1]
            
            if j > 0 and matrix[i][j - 1] <= matrix[i][j] and (i, j - 1) not in visited and (not res1 or not res2):
                res = dfs(i, j - 1)
                res1 = res1 or res[0]
                res2 = res2 or res[1]
            
            if j < len(matrix[0]) - 1 and matrix[i][j + 1] <= matrix[i][j] and (i, j + 1) not in visited and (not res1 or not res2):
                res = dfs(i, j + 1)
                res1 = res1 or res[0]
                res2 = res2 or res[1]
            
            if res1 and res2:
                mem[(i, j)] = (res1, res2)
                result.append([i, j])
            visited.remove((i, j))
            return res1, res2
        
        for i in range(0, len(matrix)):
            for j in range(0, len(matrix[0])):
                if (i, j) not in mem:
                    dfs(i, j) 
        return result
        
print(Solution().pacificAtlantic([[76,4,4,69,6,26,66,11,71,25,7,49,11,54,86,10,28,40,71,12,76,68,31,95,1,4,5,8,4,99,22,8,26,50,71,86,79,25,61,9,97,32,62,59,24,72,19,16,32,54,27,39,36,95,25,92,3,15,10,26,29,20,54,23,71,34,29,7,48,29,8,62,83,35,65,43,46,81,4,74],[66,0,91,4,14,89,17,82,42,87,68,56,45,73,92,17,46,0,97,9,12,70,73,22,5,65,12,96,77,7,0,76,24,59,56,28,37,82,37,49,88,8,76,70,79,62,8,25,89,81,4,76,95,64,73,42,83,82,29,95,60,87,45,46,68,39,5,55,6,54,57,86,55,35,77,43,60,66,38,3],[74,68,88,67,55,7,71,8,37,27,50,80,55,25,21,5,5,51,30,64,73,33,31,8,17,83,18,68,39,51,37,39,35,25,83,79,1,79,9,42,11,31,78,70,39,42,56,12,30,59,96,0,37,99,93,39,0,88,6,61,97,64,54,49,31,33,72,68,59,31,25,83,41,59,38,90,96,0,84,94],[17,67,46,6,54,23,32,3,74,3,78,77,93,40,41,86,26,64,80,41,93,45,4,39,35,42,4,72,77,59,99,13,37,13,32,83,41,3,28,96,82,59,68,81,68,88,18,16,36,4,42,67,46,27,46,38,86,9,26,55,43,29,99,5,6,90,66,23,17,13,65,2,96,89,79,81,22,29,37,81],[52,96,42,30,31,59,35,65,60,58,27,92,89,81,65,12,16,52,81,86,31,27,59,46,35,36,84,0,50,17,1,76,32,81,40,9,59,7,74,34,14,60,92,27,4,11,84,51,59,22,56,3,67,43,5,94,53,72,33,27,8,81,27,29,59,17,77,65,23,64,64,79,40,16,40,87,43,22,3,59],[22,97,59,23,0,86,40,76,69,46,68,49,38,33,11,92,77,88,91,42,86,14,1,67,79,57,27,97,51,12,17,71,27,92,14,13,71,56,88,83,55,34,64,64,5,37,93,9,38,84,49,27,53,77,13,58,17,64,93,4,4,99,63,39,85,99,70,42,67,5,48,55,27,50,82,69,71,69,76,89],[34,99,8,21,4,25,31,76,67,11,35,46,21,32,25,27,4,39,42,42,21,21,38,60,68,68,73,43,64,68,41,35,29,25,98,28,22,82,85,10,6,29,64,84,34,91,50,3,16,92,23,36,56,71,12,75,4,80,1,44,71,92,12,94,35,9,2,3,67,36,25,46,60,59,56,81,60,96,44,95],[50,4,99,97,16,73,99,26,42,21,10,93,65,51,21,32,84,83,40,7,4,90,99,78,51,68,27,11,19,87,45,48,16,73,96,77,27,10,59,63,82,43,81,50,25,59,36,37,44,36,13,27,73,90,85,88,33,81,94,19,70,36,2,57,3,91,86,12,51,21,95,25,88,7,97,94,84,54,4,15],[44,60,75,69,13,58,62,22,92,73,84,81,41,43,27,30,75,77,91,1,68,64,69,44,72,48,50,66,1,33,98,59,10,97,1,38,80,84,21,12,86,40,6,88,29,64,91,51,84,19,93,60,7,61,83,96,94,83,84,65,93,80,62,82,87,65,60,57,23,66,59,16,49,27,70,93,82,26,15,52],[90,50,15,7,99,45,42,77,27,83,12,96,28,71,88,59,87,8,42,80,46,81,75,91,32,77,50,39,3,19,28,93,82,81,53,4,77,96,25,92,33,44,45,27,49,42,79,78,26,0,34,72,76,9,99,42,58,43,5,87,61,65,35,63,10,29,48,87,52,94,30,48,9,59,55,54,8,49,25,59],[21,76,48,57,78,30,45,48,81,72,12,29,95,33,7,60,79,49,99,74,85,43,87,92,39,3,3,64,22,68,8,6,74,37,24,58,71,12,50,12,80,48,69,4,74,72,19,22,58,97,18,35,40,47,85,74,71,17,84,62,87,87,88,19,2,69,95,87,88,59,94,5,70,16,30,98,77,40,22,72],[13,66,61,94,24,70,80,6,46,88,58,51,66,49,3,27,22,60,96,2,88,90,41,0,65,95,39,52,57,50,49,14,53,43,85,53,62,75,7,22,54,52,45,12,95,44,51,53,60,93,4,57,16,63,94,38,76,97,30,85,77,66,59,4,79,36,49,90,9,72,75,11,92,30,38,1,11,82,2,36],[82,80,85,1,64,84,79,16,35,71,33,95,38,60,86,99,77,86,45,89,53,27,17,98,97,37,92,89,78,20,21,94,54,78,49,93,71,39,14,4,2,49,87,22,76,71,92,53,57,29,2,32,44,42,23,70,31,82,43,17,59,35,83,35,94,98,12,78,85,54,19,32,29,30,73,40,93,37,90,44],[49,8,83,16,11,91,33,31,51,28,88,1,75,33,47,1,36,36,28,28,67,86,92,23,28,6,37,35,20,9,36,19,7,39,72,20,84,67,53,5,62,47,82,52,61,63,72,89,30,1,95,31,92,31,71,33,43,82,53,0,7,94,70,98,78,10,53,50,23,14,25,32,70,56,33,87,66,25,91,40],[27,73,28,66,49,9,38,79,70,81,9,6,42,45,79,93,13,86,39,59,96,80,6,88,65,14,37,2,81,55,28,81,82,46,51,17,46,40,86,47,21,99,31,62,11,11,25,65,10,67,17,47,57,41,8,18,49,14,59,64,35,84,67,20,37,10,65,14,54,64,86,19,56,45,57,92,59,90,18,68],[92,88,11,17,85,73,14,88,4,55,70,34,51,70,71,33,51,21,73,27,6,29,77,89,59,30,66,71,24,51,31,76,54,9,30,42,30,3,66,40,89,25,18,16,82,27,17,48,79,38,99,28,97,15,78,39,10,83,27,36,6,46,99,96,74,27,33,61,76,69,62,85,91,93,20,97,52,57,45,30],[47,73,44,7,72,65,50,16,69,31,90,19,4,43,48,56,63,1,20,35,16,85,83,79,56,42,59,62,20,26,43,89,70,51,86,62,74,17,81,61,52,46,13,35,59,62,84,84,93,11,91,8,81,33,80,47,63,25,83,39,58,24,18,83,60,31,11,37,36,37,94,40,72,57,19,9,26,14,84,72],[24,42,99,4,89,47,87,95,79,5,40,19,3,81,60,3,49,78,11,42,69,50,51,79,59,28,41,88,2,5,71,73,80,65,55,82,41,48,94,61,22,15,31,31,79,74,71,69,81,11,68,47,54,76,78,52,14,9,46,18,50,94,27,17,60,33,55,47,3,1,54,8,87,10,27,7,57,75,84,65],[20,46,72,92,78,67,28,21,33,46,54,41,23,48,86,94,26,9,68,34,71,56,87,96,86,34,16,18,85,4,82,19,45,68,98,59,70,87,21,25,5,59,81,41,20,76,33,83,17,97,97,32,16,10,77,17,11,36,82,13,81,60,75,40,94,84,39,34,89,60,16,76,96,95,72,99,54,3,20,96],[13,74,98,73,31,14,19,47,98,35,26,59,30,17,21,83,95,71,34,25,8,94,70,55,52,26,18,71,25,51,35,25,22,16,71,29,95,6,46,54,67,99,95,42,87,94,49,27,2,60,63,89,43,33,16,64,83,1,55,65,40,89,97,63,96,17,9,19,97,1,22,31,14,21,50,11,41,42,27,42],[76,35,78,66,81,88,87,29,71,15,3,16,55,85,7,60,44,75,79,11,12,50,47,89,31,5,89,53,7,51,90,56,9,57,55,44,22,85,66,53,2,97,83,57,3,3,53,14,56,50,89,59,1,11,45,12,30,89,58,94,22,75,68,3,85,69,87,58,47,54,7,16,94,21,74,15,92,78,95,48],[89,85,67,65,71,26,59,40,87,11,68,27,33,83,95,0,56,96,29,33,0,73,8,50,13,62,97,80,93,40,52,58,59,80,98,17,83,24,18,1,42,75,52,88,18,71,96,80,98,77,14,57,52,4,47,39,13,98,46,25,99,32,6,72,82,48,81,89,84,78,78,67,31,20,20,36,53,51,54,10],[60,76,48,89,0,56,56,88,8,5,95,73,25,53,59,7,39,28,12,87,99,82,75,75,6,66,19,39,87,59,87,66,28,90,25,66,11,9,37,39,60,35,87,6,24,61,16,93,32,45,64,0,28,29,48,7,47,18,26,75,27,23,69,96,59,26,41,83,14,83,84,98,64,93,15,1,47,6,28,8],[22,26,52,35,6,75,90,49,14,35,98,22,54,15,57,92,38,89,58,21,60,18,14,44,19,3,29,89,71,53,85,59,90,39,44,21,77,92,53,88,36,34,80,69,40,15,15,86,51,70,30,8,50,82,11,69,47,11,43,79,63,38,41,38,42,13,9,49,86,3,81,60,39,18,71,71,0,94,91,71],[27,9,16,4,35,18,15,89,91,96,57,43,76,1,85,25,95,79,61,69,9,18,22,86,64,51,88,73,51,74,36,85,15,3,69,52,8,96,25,92,47,47,73,29,21,2,37,56,42,73,86,71,69,39,71,80,27,26,90,75,84,37,31,34,61,44,55,84,40,67,55,59,71,10,53,48,11,77,96,43],[49,84,20,99,46,80,97,72,17,2,13,9,67,92,20,57,19,86,48,42,68,10,47,1,55,49,48,48,57,10,59,19,2,44,5,71,70,47,60,8,24,44,53,26,61,72,27,43,27,67,3,60,40,42,41,97,42,71,15,3,72,8,55,15,99,72,51,33,38,85,20,42,74,55,86,82,38,67,79,2],[67,91,9,51,86,67,59,89,10,76,28,23,16,37,21,19,78,72,73,45,37,87,60,65,37,23,57,87,89,90,94,11,9,65,69,82,69,38,75,17,34,16,65,76,12,11,24,39,74,60,36,76,36,7,69,34,87,69,85,95,87,37,50,27,31,17,11,66,3,9,66,71,70,24,74,84,64,96,19,15],[2,61,66,34,26,58,3,23,86,52,95,74,68,35,4,33,4,36,79,67,45,44,48,80,86,56,45,77,17,2,77,51,96,83,37,15,88,52,66,89,28,21,22,2,26,58,35,45,35,21,90,68,18,25,41,77,78,11,36,40,39,14,31,48,95,53,65,82,5,68,50,5,99,23,33,97,0,1,57,87],[18,92,83,98,46,67,13,37,75,41,62,36,45,48,29,0,50,3,60,64,51,20,50,42,97,27,39,79,32,35,0,55,48,58,90,25,74,18,3,92,99,71,52,50,88,36,54,1,87,86,16,28,74,11,7,96,81,80,85,10,38,86,93,82,69,91,43,4,54,81,48,34,15,84,44,1,87,54,52,2]]))